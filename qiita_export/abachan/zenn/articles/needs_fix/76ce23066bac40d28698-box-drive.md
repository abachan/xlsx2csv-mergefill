---
title: "Box Driveで「アップロードエラー」がしつこく表示される時の対処法"
emoji: "📝"
type: "tech"
topics:[windows,box,boxdrive]
published: false
---

<!-- TODO: 以下を調整 -->
<!-- - Qiita画像ホスティング -->
<!-- - トピック数/形式の調整 -->
<!--   * そのままでも表示可。GitHub連携で運用する場合は画像を保存して相対パスへ書換推奨 -->
<!--   * Zennのtopicsは最大5・半角英数とハイフンのみ。候補: windows, box, boxdrive -->
## はじめに

ある時から、PCを起動したりBox Driveを使っていると、以下のようなアップロードエラーという通知が頻繁に表示されるようになりました。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3963503/f5087ffd-a271-488b-aff7-b25d789f6231.png)

エラーの詳細を確認すると、特定のファイルが原因のようです。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3963503/184e9a7e-beca-4b51-add5-9178d35cca78.png)

メッセージには「ファイルが閉じられていること、または使用されていないことを確認して、もう一度試してください」とありますが、該当ファイルは編集中でもなく、特にPCの動作に異常もありませんでした。
しかし、毎回この通知が表示されるのが非常に煩わしく、本格的に対策することにしました。

## 試したこと①：詳細情報の確認（効果なし）

まずはエラーダイアログに表示されている「詳細情報」ボタンをクリックしてみました。
しかし、表示されたのはまさかの404ページ...。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3963503/ff5bfae5-fce6-4aa9-b011-71bff53f15d7.png)

公式のヘルプにもたどり着けず、解決の糸口を掴むことができませんでした。

## 試したこと②：キャッシュを削除して再ログイン（効果あり）

次に、Box Driveのキャッシュが破損しているのではないかと考え、以下の手順を試したところ、無事に解決することができました。

### 手順1：Box Driveからログアウトする

タスクトレイにあるBoxのアイコンを右クリックし、「ログアウト」を選択します。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3963503/57443692-bd62-4b4a-88ff-077f3d03c8ea.png)

### 手順2：「アップロードされていないファイルを保持する」のチェックを外す

ログアウトを選択すると、確認のダイアログが表示されます。
ここで、問題となっているアップロードエラーの項目が表示されます。

**ここが最も重要なポイントです。**
デフォルトでチェックが入っている「**Boxにアップロードされていないファイルを保持する**」のチェックを**外して**から、「ログアウト」ボタンをクリックします。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3963503/a6d65849-b7f1-4e83-be64-8cc53455bc78.png)

この操作により、アップロードキューに残ってしまっていた問題のファイルキャッシュが破棄されるようです。

### 手順3：キャッシュフォルダの確認

念のため、ローカルのキャッシュフォルダが空になっているか確認します。
エクスプローラーのアドレスバーに以下のパスを入力して開きます。

```
%localappdata%\\Box\\Box\\
```

私の環境では、この中の `cache` フォルダが手順2のログアウト操作によって自動的に削除されていました。もし残っている場合は、手動で削除するとより確実かもしれません。

### 手順4：Box Driveに再ログインしてPCを再起動

再度Box Driveを起動してログインし、最後にPCを再起動します。
再起動後、あのしつこいエラー通知が表示されなくなりました！

## まとめ

Box Driveの「アップロードエラー」が消えない問題は、
1.  ログアウト時に **「Boxにアップロードされていないファイルを保持する」のチェックを外す**
2.  キャッシュをクリアした状態で再ログインする

ことで解決できました。
どうやらアップロードに失敗したファイルのキャッシュが中途半端に残り続けることが原因だったようです。

同じエラーでお困りの方は、ぜひこの方法を試してみてください。誰かのお役に立てれば幸いです。
